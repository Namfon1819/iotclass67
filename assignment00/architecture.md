# Main technologies of architecture

## Architecture Overview


![image](https://github.com/user-attachments/assets/90fe05b8-1629-4ce5-9431-9de26fd52215)



## Eclipse Mosquitto
    Eclips Mosquitto เป็น MQTT broker ที่ทำหน้าที่เป็น "สถานีชุมทาง" 
สำหรับการส่งและรับข้อมูลในระบบ IoT อุปกรณ์ต่างๆ จะสามารถสื่อสารกันผ่าน Mosquitto โดยใช้โปรโตคอล MQTT ซึ่งมีประสิทธิภาพสูงและกินทรัพยากรน้อย 

## Apache ZooKeeper
    Eclips Mosquitto เป็น MQTT broker ที่ทำหน้าที่เป็น "สถานีชุมทาง" 
สำหรับการส่งและรับข้อมูลในระบบ IoT อุปกรณ์ต่างๆ จะสามารถสื่อสารกันผ่าน Mosquitto โดยใช้โปรโตคอล MQTT ซึ่งมีประสิทธิภาพสูงและกินทรัพยากรน้อย 

## Apache Kafka
    Apache Kafka
เป็นแพลตฟอร์มสตรีมมิ่งข้อมูลที่ช่วยให้การส่งข้อมูลแบบเรียลไทม์เป็นไปอย่างมีประสิทธิภาพ ข้อมูลจะถูกส่งไปยัง "topics" และสามารถดึงข้อมูลจาก topics เหล่านั้นได้ง่ายและรวดเร็ว 

## Apache Kafka Connect
•Kafka Connect เป็นเครื่องมอื ที่ช่วยเชื่อมต่อ Kafka กับระบบอื่นๆ เช่น ฐานข้อมูล และระบบไฟล์. 

•ทำให้ง่ายต่อการส่งข้อมูลเข้าและออกจาก Kafka 

## Apache Kafka Streams
•เป็นชุดเครื่องมือสำหรับการสร้างแอปพลิเคชันที่ทำงานกับข้อมูลที่เก็บไว้ใน Kafka 

•ช่วยให้เขียนโปรแกรมและใช้งานแอปพลิเคชันได้ง่ายขึ้น 

## Prometheus
• เป็นระบบ monitoring และ alerting แบบ open-source ที่ถูกออกแบบมาสำหรับการเก็บข้อมูลจากแอปพลิเคชันและระบบต่าง ๆ ในรูปของ time-series data (ข้อมูลตามเวลา) เพื่อวิเคราะห์และติดตามประสิทธิภาพของระบบได้อย่างมีประสิทธิภาพ

## MongoDB
• MongoDB เป็นระบบฐานข้อมูล NoSQL แบบ document-oriented ที่เก็บข้อมูลในรูปแบบ JSON-like documents มีความยืดหยุ่นสูง เหมาะสำหรับการจัดเก็บข้อมูลที่มีโครงสร้างไม่แน่นอนหรือเปลี่ยนแปลงบ่อย เช่น แอปพลิเคชันที่เติบโตเร็วหรือมีข้อมูลขนาดใหญ่

## Grafana
• Grafana เป็นเครื่องมอื ที่ใช้แสดงผลข้อมูลเป็นกราฟและแดชบอร์ด 
• สามารถดึงข้อมูลจากแหล่งต่างๆ เช่น Prometheus มาทำการแสดงผลในรูปแบบที่เข้าใจง่าย

# iot sensor
## BMP280 
เซ็นเซอร์วัดอุณหภูมิและความกดอากาศ ตัวนี้ถูกใช้ในการเก็บข้อมูลอุณหภูมิและความดันของสภาพแวดล้อม ข้อมูลเหล่านี้จะถูกอ่านจากเซ็นเซอร์ BMP280 ผ่านโปรโตคอล I2C จากนั้นค่าที่วัดได้จะถูกนำมาแสดงผลบน Serial Monitor และส่งผ่าน MQTT ในรูปแบบ JSON เพื่อให้สามารถนำไปวิเคราะห์และจัดเก็บในเซิร์ฟเวอร์

## SHT4x 
เป็นเซ็นเซอร์วัดอุณหภูมิและความชื้น ตัวนี้ถูกใช้ในการเก็บข้อมูลอุณหภูมิและความชื้นจากสภาพแวดล้อม เซ็นเซอร์นี้เชื่อมต่อผ่าน I2C และมีการตั้งค่าระบบเพื่อรีเซ็ตตัวเองและเริ่มทำงานใหม่เมื่อมีปัญหา ข้อมูลที่อ่านได้จาก SHT4x จะถูกจัดเก็บในโครงสร้าง JSON เพื่อส่งไปยัง MQTT สำหรับจัดเก็บและวิเคราะห์ต่อไป

## เซ็นเซอร์วัดแสง 
ตัวเซ็นเซอร์วัดแสงใช้ขาอนาล็อก (Pin 5) ในการเก็บข้อมูลระดับแสงภายในสภาพแวดล้อม เซ็นเซอร์นี้จะวัดระดับความเข้มของแสงโดยแปลงค่าเป็นสัญญาณอนาล็อกที่สามารถอ่านผ่านฟังก์ชัน analogRead และส่งข้อมูลไปยังเซิร์ฟเวอร์ผ่าน MQTT ในรูปแบบ JSON เช่นกัน

## NeoPixel 
ตัวนี้ไม่ได้เป็นเซ็นเซอร์ แต่เป็นอุปกรณ์แสดงผลสำหรับการเปลี่ยนสีตามสถานะของระบบ เช่น เมื่อเชื่อมต่อ WiFi, MQTT หรือตอนส่งข้อมูล จะใช้สีต่าง ๆ เพื่อบ่งบอกสถานะการทำงานของระบบ ช่วยให้ทราบว่าระบบทำงานตามที่คาดหมายหรือไม่
